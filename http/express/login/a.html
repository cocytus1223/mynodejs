<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <script src="./ajax.js"></script>
</head>

<body>
  用户名：<input type="text" name="" id="user"><br>
  密码：<input type="password" name="" id="pass"><br>
  <input type="button" value="登录" id="login">
  <script>
    window.onload = function () {
      var oUser = document.getElementById('user');
      var oPass = document.getElementById('pass');
      var oBtn = document.getElementById('login');

      oBtn.onclick = function () {
        ajax({
          url: '/login',
          data: {
            user: oUser.value,
            pass: oPass.value
          },
          success: function (str) {
            var json = eval('(' + str + ')');
            if (json.ok) {
              alert('登录成功');
            } else {
              alert('登录失败:' + json.msg);
            }
          },
          error: function () {
            alert('通信失败');
          }
        })
      }

    }
  </script>
</body>

</html>